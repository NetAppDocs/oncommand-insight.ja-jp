---
permalink: config-admin/creating-a-query.html 
sidebar: sidebar 
keywords:  
summary: クエリを作成して、環境内のアセットをきめ細かく検索することができます。クエリを使用すると、フィルタを追加して結果をソートし、インベントリデータとパフォーマンスデータを1つのビューに表示することで、データをスライスできます。 
---
= クエリを作成しています
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クエリを作成して、環境内のアセットをきめ細かく検索することができます。クエリを使用すると、フィルタを追加して結果をソートし、インベントリデータとパフォーマンスデータを1つのビューに表示することで、データをスライスできます。



== このタスクについて

たとえば、ボリュームのクエリを作成したり、選択したボリュームに関連付けられているストレージを検索するフィルタを追加したり、階層1などの特定のアノテーションを検索するフィルタを追加したりできます。 最後に、IOPS - Read（IO/秒）が25を超えるストレージをすべて検出するフィルタをもう1つ追加します。結果が表示されたら、クエリに関連付けられている各列で情報を昇順または降順にソートすることができます。

アセットを取得する新しいデータソースを追加したときや、アノテーションやアプリケーションの割り当てを行ったときに、クエリのインデックスが作成されたあとに、それらのアセット、アノテーション、またはアプリケーションを照会することができます。インデックスは定期的な間隔で作成されます。



== 手順

. OnCommand Insight Web UIにログインします。
. [Queries]*をクリックし、*[+ New Query]*を選択します。
. [リソースタイプの選択]*をクリックし、アセットのタイプを選択します。
+
クエリでリソースを選択すると、いくつかのデフォルト列が自動的に表示されます。これらの列はいつでも削除したり、新しい列を追加したりできます。

. [名前*]テキストボックスにアセットの名前を入力するか、テキストの一部を入力してアセット名を絞り込みます。
+
[New Query]ページのテキストボックスでは、次のいずれかを単独で使用することも、組み合わせて使用することもできます。

+
** アスタリスクを使用すると、すべての項目を検索できます。例： `vol*rhel` 「vol」で始まり「rhel」で終わるすべてのリソースを表示します。
** 疑問符を使用すると、特定の数の文字を検索できます。例： `BOS-PRD??-S12` BOS-PRD12-S12、BOS-PRD13-S12などを表示します。
** OR 演算子を使用すると、複数のエンティティを指定できます。例： `FAS2240 OR CX600 OR FAS3270` 複数のストレージモデルを検出します。
** NOT 演算子を使用すると、検索結果からテキストを除外できます。例： `NOT EMC*` 「EMC」で始まらないものをすべて検索します。を使用できます `NOT *` 値のないフィールドを表示します。


. をクリックします image:../media/check-box-ok.gif[""] をクリックしてアセットを表示します。
. 条件を追加するには、をクリックします image:../media/more-button.gif[""]をクリックし、次のいずれかを実行します。
+
** と入力して特定の条件を検索し、選択します。
** リストを下にスクロールし、条件を選択します。
** IOPS -読み取り（IO/秒）などのパフォーマンス指標を選択した場合は、値の範囲を入力します。Insightのデフォルトのアノテーションはで示されます image:../media/annotation-icon.gif[""];重複する名前を持つ注釈を持つことができます。


+
条件の列が[クエリ結果]リストに追加され、リスト内のクエリの結果が更新されます。

. 必要に応じて、をクリックします image:../media/remove-criteria-button.gif[""] をクリックして、クエリ結果からアノテーションまたはパフォーマンス指標を削除します。
+
たとえば、データストアの最大レイテンシと最大スループットを表示するクエリで結果のリストに最大レイテンシのみを表示する場合は、このボタンをクリックし、* Throughput - Max *チェックボックスをオフにします。[Query results]のリストから[Throughput - Max（MB/s）]列が削除されます。

+
[NOTE]
====
クエリ結果テーブルに表示される列の数によっては、追加された列を表示できない場合があります。目的の列が表示されるまで、1つまたは複数の列を削除できます。

====
. [保存]*をクリックし、クエリの名前を入力して*[保存]*をもう一度クリックします。
+
管理者ロールを持つアカウントがある場合は、カスタムダッシュボードを作成できます。カスタムダッシュボードはウィジェットライブラリの任意のウィジェットで構成でき、そのいくつかを使用してクエリ結果をカスタムダッシュボードに表示できます。カスタムダッシュボードの詳細については、_ OnCommand Insight スタートガイド_を参照してください。



* 関連情報 *

link:importing-and-exporting-user-data.md#["ユーザーデータのインポートとエクスポート"]
